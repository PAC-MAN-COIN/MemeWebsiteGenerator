<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Memeportal ‚Äî Social Post Generator</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="site-header"></div>
  <script>
    (async ()=>{try{
      const host=document.getElementById('site-header');
      host.innerHTML=await (await fetch('nav.html')).text();
      const btn=host.querySelector('.menu-toggle'), menu=host.querySelector('#mobileMenu');
      if(!btn||!menu) return;
      const close=()=>{menu.setAttribute('hidden','');btn.setAttribute('aria-expanded','false');document.removeEventListener('click',away);};
      const open =()=>{menu.removeAttribute('hidden');btn.setAttribute('aria-expanded','true');setTimeout(()=>document.addEventListener('click',away),0);};
      const away=e=>{if(!menu.contains(e.target)&&!btn.contains(e.target)) close();};
      btn.addEventListener('click',e=>{e.stopPropagation();menu.hasAttribute('hidden')?open():close();});
      window.matchMedia('(min-width:900px)').addEventListener?.('change',e=>{if(e.matches) close();});
      close();
    }catch(e){console.warn('nav load failed',e);} })();
  </script>

  <div class="app app--wide">
    <aside>
      <div class="card section">
        <h2>Project</h2>
        <div class="grid two">
          <div><label>Name</label><input id="p_name" type="text" value="BeastLab"></div>
          <div><label>Ticker</label><input id="p_ticker" type="text" value="BG"></div>
        </div>
        <div class="grid three">
          <div><label>Chain</label>
            <select id="p_chain"><option>Solana</option><option>Ethereum</option><option>BNB</option><option>Base</option></select>
          </div>
          <div><label>Primary</label><input id="c1" type="color" value="#7c3aed"></div>
          <div><label>Secondary</label><input id="c2" type="color" value="#22d3ee"></div>
        </div>
      </div>

      <div class="card section">
        <h2>Links (optional)</h2>
        <div class="grid two">
          <div><label>Website</label><input id="l_site" type="text" placeholder="https://"></div>
          <div><label>Telegram</label><input id="l_tg" type="text" placeholder="https://t.me/..."></div>
        </div>
        <div class="grid two">
          <div><label>DexScreener</label><input id="l_ds" type="text" placeholder="https://dexscreener.com/..."></div>
          <div><label>Twitter/X</label><input id="l_x" type="text" placeholder="https://x.com/..."></div>
        </div>
      </div>

      <div class="card section">
        <h2>Template</h2>
        <select id="tpl">
          <option value="launch">Launch announcement</option>
          <option value="gm">GM / daily vibe</option>
          <option value="milestone">Milestone / listing</option>
          <option value="cta">Call to action (buy / join)</option>
          <option value="thread">Mini-thread (3 parts)</option>
        </select>
        <div class="toolbar" style="margin-top:10px">
          <button class="btn primary" id="generate">Generate</button>
          <button class="btn" id="copy">Copy</button>
        </div>
      </div>

      <div class="card section">
        <h2>Export a Graphic</h2>
        <div class="tiny muted">Makes a PNG ‚Äúshill card‚Äù from the text on the right.</div>
        <div class="grid two" style="margin-top:8px">
          <div><label>Size</label>
            <select id="gfxSize"><option value="1200x630">OpenGraph ‚Äî 1200√ó630</option><option value="1600x900">Widescreen ‚Äî 1600√ó900</option><option value="1080x1080">Square ‚Äî 1080√ó1080</option></select>
          </div>
          <div><label>Logo (optional)</label><input id="logo" type="file" accept="image/*"></div>
        </div>
        <div class="toolbar" style="margin-top:10px">
          <button class="btn success" id="downloadCard">Download PNG</button>
        </div>
      </div>
    </aside>

    <main>
      <div class="card section preview-pane">
        <div class="kicker">Preview</div>
        <div class="preview-frame" style="padding:16px">
          <div id="postText" class="container" style="max-width:860px;white-space:pre-wrap"></div>
          <canvas id="card" width="1200" height="630" style="display:none"></canvas>
        </div>
      </div>
    </main>
  </div>

<script>
(function(){
  const $=id=>document.getElementById(id);
  const fields=['p_name','p_ticker','p_chain','l_site','l_tg','l_ds','l_x','tpl','c1','c2'].reduce((a,k)=>(a[k]=$(k),a),{});
  let logoImg=null;
  $('logo').addEventListener('change',()=>{const f=$('logo').files?.[0]; if(!f) return; logoImg=new Image(); logoImg.src=URL.createObjectURL(f);});

  function links(){
    const L=[]; if(fields.l_site.value) L.push('üåê '+fields.l_site.value);
    if(fields.l_tg.value) L.push('üí¨ '+fields.l_tg.value);
    if(fields.l_ds.value) L.push('üìà '+fields.l_ds.value);
    if(fields.l_x.value)  L.push('üïäÔ∏è '+fields.l_x.value);
    return L.join('\n');
  }

  function tmpl(kind){
    const n=fields.p_name.value||'Project', t=(fields.p_ticker.value||'TICKER').toUpperCase(), ch=fields.p_chain.value||'';
    const l=links(); const end = l?('\n\n'+l):'';
    if(kind==='gm') return `GM ${t} army ‚òÄÔ∏è

We‚Äôre building ${n} on ${ch}. Community is everything ‚Äî reply with your best meme today üëá${end}`;
    if(kind==='milestone') return `${n} (${t}) update üöÄ

‚Ä¢ New milestone live
‚Ä¢ More community contests soon
‚Ä¢ Keep an eye on announcements

Let‚Äôs keep shipping. ${ch} never sleeps.${end}`;
    if(kind==='cta') return `${t} on ${ch} ‚Äî join the movement ü´°

‚Ä¢ Fair vibes, clean branding
‚Ä¢ Strong community
‚Ä¢ Day 1 energy

Tap in, bring a fren, drop a meme. LFG!${end}`;
    if(kind==='thread') return `1/ ${n} (${t}) ‚Äî quick thread üßµ

‚Ä¢ What we‚Äôre building
‚Ä¢ Why memes + utility
‚Ä¢ How to join

2/ Community
‚Ä¢ ${n} is built in public
‚Ä¢ Weekly contests & drops

3/ Start here
${l || '‚Ä¢ Website + Telegram in bio'}`;
    // launch
    return `${n} (${t}) is live on ${ch}! üî•

Clean launch, no presale, pure meme energy.
Welcome frens ‚Äî let‚Äôs build together.${end}`;
  }

  function update(){ $('postText').textContent = tmpl(fields.tpl.value); }
  $('generate').addEventListener('click',update);
  Object.values(fields).forEach(el=>{el.addEventListener('input',update); el.addEventListener('change',update);});
  update();

  $('copy').addEventListener('click', async ()=>{
    try{ await navigator.clipboard.writeText($('postText').textContent); alert('Copied!'); }catch(e){ alert('Copy failed'); }
  });

  // card export
  $('downloadCard').addEventListener('click', ()=>{
    const c=$('card'), g=c.getContext('2d');
    const [W,H]=$('gfxSize').value.split('x').map(n=>+n); c.width=W; c.height=H;
    // bg
    const grad=g.createLinearGradient(0,0,W,H); grad.addColorStop(0, fields.c1.value); grad.addColorStop(1, fields.c2.value);
    g.fillStyle='#0f1115'; g.fillRect(0,0,W,H);
    g.globalAlpha=.6; g.fillStyle=grad; g.fillRect(0,0,W,H); g.globalAlpha=1;

    // text box
    const pad=48; g.fillStyle='rgba(11,15,23,.72)'; g.fillRect(pad,pad,W-2*pad,H-2*pad);
    g.strokeStyle='rgba(255,255,255,.08)'; g.lineWidth=2; g.strokeRect(pad+1.5,pad+1.5,W-2*pad-3,H-2*pad-3);

    // title
    g.fillStyle='#e6e9ef'; g.font='bold 42px system-ui'; g.fillText((fields.p_name.value||'Project')+'  ('+(fields.p_ticker.value||'TICKER').toUpperCase()+')', pad+36, pad+80);
    // body
    g.font='24px system-ui'; g.fillStyle='#cbd5e1';
    const text=$('postText').textContent;
    wrapText(g,text,pad+36,pad+120,W-2*pad-72,34);

    // logo
    if(logoImg){ const s=120; g.drawImage(logoImg, W-s-pad, pad, s, s); }

    c.toBlob(b=>{const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='post-card.png'; a.click();}, 'image/png');
  });

  function wrapText(g, t, x, y, maxW, lh){
    const words=t.split(' '); let line='';
    for(let i=0;i<words.length;i++){
      const test=line+words[i]+' '; const w=g.measureText(test).width;
      if(w>maxW && i>0){ g.fillText(line, x, y); line=words[i]+' '; y+=lh; }
      else line=test;
    } g.fillText(line, x, y);
  }
})();
</script>
</body>
</html>
