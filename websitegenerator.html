<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Memeportal â€” NextGen Site Generator</title>
<link rel="stylesheet" href="style.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<style>
  /* Generator Tool Specific Styles */
  :root { --p-bg: #050505; --p-card: #0e0e0e; --p-border: #222; --p-accent: #3b82f6; }
  .preview-pane { position: sticky; top: 20px; height: calc(100vh - 40px); overflow: hidden; display: flex; flex-direction: column; }
  #preview { flex: 1; border: 0; width: 100%; height: 100%; background: #fff; border-radius: 8px; overflow-y: auto; }
  /* Simulating the iframe sandbox environment */
  .preview-frame { isolation: isolate; }
</style>
</head>
<body>
  <div id="site-header"></div>
  <script>
    (async function(){
      try{
        const host = document.getElementById('site-header');
        host.innerHTML = await (await fetch('nav.html')).text();
        const btn = host.querySelector('.menu-toggle');
        const menu = host.querySelector('#mobileMenu');
        if(!btn || !menu) return;
        const close=()=>{menu.setAttribute('hidden','');btn.setAttribute('aria-expanded','false');document.removeEventListener('click',away);};
        const open =()=>{menu.removeAttribute('hidden');btn.setAttribute('aria-expanded','true');setTimeout(()=>document.addEventListener('click',away),0);};
        const away = e => { if(!menu.contains(e.target)&&!btn.contains(e.target)) close(); };
        btn.addEventListener('click',e=>{e.stopPropagation();menu.hasAttribute('hidden')?open():close();});
        window.matchMedia('(min-width:900px)').addEventListener?.('change',e=>{ if(e.matches) close(); });
        close();
      }catch(e){ console.warn('nav load failed', e); }
    })();
  </script>

  <div class="app app--wide">
    <aside>
      <nav class="toc" id="wgToc"><div class="title">Quick menu</div><div class="row" id="wgTocLinks"></div></nav>

      <div class="card section" id="sec-basics">
        <h2>Brand Identity</h2>
        <div class="grid">
          <div><label>Project Name</label><input id="p_name" type="text" value="MoonBeast"></div>
          <div class="grid two">
            <div><label>Ticker</label><input id="p_ticker" type="text" value="$BEAST"></div>
            <div><label>Chain</label><select id="p_chain"><option>Solana</option><option>Ethereum</option><option>Base</option><option>Sui</option></select></div>
          </div>
          <div><label>Tagline</label><input id="p_tag" type="text" value="The only beast that feeds on jeets."></div>
          <div><label>Contract Address (CA)</label><input id="p_ca" type="text" placeholder="Paste CA here"></div>
        </div>
      </div>

      <div class="card section" id="sec-design">
        <h2>Visual Style</h2>
        <div class="grid">
          <div class="grid three">
            <div><label>Primary</label><input id="c_accent" type="color" value="#8b5cf6"></div>
            <div><label>Secondary</label><input id="c_accent2" type="color" value="#06b6d4"></div>
            <div><label>Background</label><input id="c_bg" type="color" value="#050505"></div>
          </div>
          <div class="grid two">
            <div>
              <label>Theme Preset</label>
              <select id="style_preset">
                <option value="modern" selected>Modern Dark (Glass)</option>
                <option value="brutal">Neo-Brutalist (Bold)</option>
                <option value="retro">Retro Terminal (Matrix)</option>
                <option value="clean">Clean / Corporate</option>
              </select>
            </div>
            <div>
              <label>Font Pair</label>
              <select id="font_preset">
                <option value="sans">Inter + Manrope (Clean)</option>
                <option value="impact">Impact + Inter (Meme)</option>
                <option value="mono">Space Mono (Tech)</option>
                <option value="display">Clash Display (Trendy)</option>
              </select>
            </div>
          </div>
          <div class="flex">
            <input id="opt_noise" type="checkbox" checked><label for="opt_noise">Add Grain/Noise Texture</label>
          </div>
          <div class="flex">
            <input id="opt_marquee" type="checkbox" checked><label for="opt_marquee">Show Infinity Marquee</label>
          </div>
        </div>
      </div>

      <div class="card section" id="sec-media">
        <h2>Assets</h2>
        <div class="grid">
          <div class="drop" id="logoDrop">
            <input id="logoFile" type="file" accept="image/*">
            <div><strong>Logo</strong> (PNG/SVG transparent)<button class="btn ghost" id="logoBrowse">Browse</button></div>
          </div>
          <div class="drop" id="bannerDrop">
            <input id="bannerFile" type="file" accept="image/*">
            <div><strong>Hero Banner</strong> (Optional wide img)<button class="btn ghost" id="bannerBrowse">Browse</button></div>
          </div>
        </div>
      </div>

      <div class="card section" id="sec-content">
        <h2>Content Sections</h2>
        <div class="grid">
          <textarea id="s_about" rows="3" placeholder="About text...">MoonBeast is not just a coin, it's a lifestyle. Born on the chain, raised by the community.</textarea>
          
          <label>Tokenomics</label>
          <div class="grid two">
            <div><label>Supply</label><input id="tok_supply" type="text" value="1,000,000,000"></div>
            <div><label>Tax</label><input id="tok_tax" type="text" value="0/0"></div>
            <div><label>Liquidity</label><input id="tok_liq" type="text" value="Burned"></div>
            <div><label>Mint</label><input id="tok_mint" type="text" value="Revoked"></div>
          </div>

          <label>Social Links</label>
          <div class="grid two">
            <input id="l_tg" type="text" placeholder="Telegram URL">
            <input id="l_x" type="text" placeholder="X / Twitter URL">
            <input id="l_ds" type="text" placeholder="DexScreener URL">
            <input id="l_buy" type="text" placeholder="Buy Link (Pump/Raydium)">
          </div>

          <label>Roadmap (One item per line)</label>
          <textarea id="s_road" rows="3">Phase 1: Launch & Vibe
Phase 2: 1000 Holders
Phase 3: Utility Drop</textarea>
        </div>
      </div>

      <div class="card section" id="sec-actions">
        <h2>Export</h2>
        <div class="toolbar right">
          <button class="btn primary" id="refreshBtn">Refresh Preview</button>
          <button class="btn success" id="exportZip">Download Website (.ZIP)</button>
        </div>
        <div class="tiny muted" style="margin-top:8px">Generates a fully responsive, single-file HTML (with assets) ready for Netlify/Vercel.</div>
      </div>
    </aside>

    <main>
      <div class="preview-pane">
        <div class="kicker" style="padding: 0 0 10px 0; background:#050814; z-index:10;">Live Preview</div>
        <iframe id="previewFrame" style="width:100%; height:100%; border:0; background:#fff; border-radius:8px;"></iframe>
      </div>
    </main>
  </div>

<script>
(function(){
  const state = { logo:null, banner:null, logoUrl:'', bannerUrl:'' };
  const el = id => document.getElementById(id);
  const inputs = [
    'p_name','p_ticker','p_chain','p_tag','p_ca',
    'c_accent','c_accent2','c_bg','style_preset','font_preset','opt_noise','opt_marquee',
    's_about','tok_supply','tok_tax','tok_liq','tok_mint',
    'l_tg','l_x','l_ds','l_buy','s_road'
  ].reduce((acc,k)=>{ acc[k]=el(k); return acc; }, {});

  // Drag & Drop Logic
  const setupDrop = (dropId, fileId, key) => {
    const d = el(dropId), f = el(fileId);
    d.addEventListener('click', () => f.click());
    f.addEventListener('change', () => { if(f.files[0]) handleFile(f.files[0], key); });
    d.addEventListener('dragover', e => { e.preventDefault(); d.classList.add('drag'); });
    d.addEventListener('dragleave', () => d.classList.remove('drag'));
    d.addEventListener('drop', e => { e.preventDefault(); d.classList.remove('drag'); if(e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0], key); });
  };
  const handleFile = (file, key) => {
    state[key] = file;
    state[key+'Url'] = URL.createObjectURL(file);
    updatePreview();
  };
  setupDrop('logoDrop', 'logoFile', 'logo');
  setupDrop('bannerDrop', 'bannerFile', 'banner');

  // --- GENERATOR ENGINE ---

  function generateCSS(d) {
    const fonts = {
      sans: "'Inter', sans-serif",
      impact: "'Impact', 'Inter', sans-serif",
      mono: "'Space Mono', monospace",
      display: "'Clash Display', sans-serif"
    }[d.font] || "sans-serif";

    // Common Base
    let css = `
      :root {
        --primary: ${d.accent}; --secondary: ${d.accent2}; --bg: ${d.bg};
        --text: #ffffff; --text-muted: rgba(255,255,255,0.6);
        --font-main: ${fonts};
        --max-w: 1200px;
        --radius: 16px;
      }
      * { box-sizing: border-box; outline: none; }
      html { scroll-behavior: smooth; }
      body { margin: 0; background: var(--bg); color: var(--text); font-family: var(--font-main); overflow-x: hidden; }
      a { text-decoration: none; color: inherit; transition: .2s; }
      img { max-width: 100%; display: block; }
      
      /* Utilities */
      .container { max-width: var(--max-w); margin: 0 auto; padding: 0 20px; }
      .flex { display: flex; align-items: center; gap: 10px; }
      .grid { display: grid; gap: 20px; }
      .section { padding: 80px 0; position: relative; }
      .btn {
        display: inline-flex; align-items: center; justify-content: center;
        padding: 12px 24px; font-weight: 700; border-radius: var(--radius);
        background: var(--primary); color: #fff; cursor: pointer;
        transition: transform .1s, filter .2s;
        border: none; font-size: 1rem;
      }
      .btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
      .btn:active { transform: translateY(0); }
      .btn.outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
      
      /* Animations */
      @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
      .reveal { animation: fadeUp 0.8s ease-out forwards; opacity: 0; }
      .delay-1 { animation-delay: 0.1s; } .delay-2 { animation-delay: 0.2s; } .delay-3 { animation-delay: 0.3s; }

      /* Marquee */
      .marquee { background: var(--primary); color: #fff; padding: 12px 0; overflow: hidden; white-space: nowrap; position: relative; transform: rotate(-1deg) scale(1.02); }
      .track { display: inline-block; animation: scroll 20s linear infinite; font-weight: 900; text-transform: uppercase; font-size: 1.2rem; }
      @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    `;

    // Theme Specifics
    if (d.theme === 'modern') {
      css += `
        body { background: radial-gradient(circle at 15% 10%, ${d.accent}22, transparent 40%), radial-gradient(circle at 85% 80%, ${d.accent2}22, transparent 40%), var(--bg); }
        .card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(10px); border-radius: var(--radius); padding: 24px; }
        h1 { font-size: clamp(3rem, 8vw, 5rem); font-weight: 800; letter-spacing: -2px; line-height: 1.1; background: linear-gradient(135deg, #fff, rgba(255,255,255,0.5)); -webkit-background-clip: text; color: transparent; }
        nav { position: sticky; top: 20px; z-index: 100; margin-top: 20px; }
        .nav-inner { background: rgba(0,0,0,0.6); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); border-radius: 999px; padding: 10px 24px; display: flex; justify-content: space-between; align-items: center; max-width: 600px; margin: 0 auto; }
        .hero-img { filter: drop-shadow(0 0 40px ${d.accent}66); animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-20px)} }
      `;
    } else if (d.theme === 'brutal') {
      css += `
        :root { --radius: 0px; }
        body { background: var(--bg); }
        .card { background: #fff; color: #000; border: 4px solid #000; box-shadow: 8px 8px 0 #000; padding: 20px; }
        .btn { background: var(--primary); color: #000; border: 3px solid #000; box-shadow: 4px 4px 0 #000; border-radius: 0; text-transform: uppercase; }
        .btn:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0 #000; }
        h1 { font-size: clamp(3rem, 10vw, 6rem); text-transform: uppercase; -webkit-text-stroke: 2px #fff; color: transparent; line-height: 0.9; }
        .nav-inner { background: #fff; border: 3px solid #000; padding: 14px 20px; display: flex; justify-content: space-between; align-items: center; color:#000; font-weight:bold; }
        .marquee { transform: none; border-top: 3px solid #000; border-bottom: 3px solid #000; }
      `;
    } else if (d.theme === 'retro') {
      css += `
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; }
        .container { max-width: 900px; border-left: 1px solid #003300; border-right: 1px solid #003300; min-height:100vh; background: #000a00; }
        h1 { text-shadow: 0 0 10px #0f0; text-transform: lowercase; }
        .card { border: 1px solid #0f0; background: #001100; padding: 16px; position:relative; }
        .card::before { content:'['; position:absolute; top:-10px; left:10px; background:#000a00; padding:0 5px; color:#0f0; }
        .btn { background: #0f0; color: #000; border-radius: 0; text-transform: lowercase; }
        .btn:hover { background: #fff; }
        .scanlines { position: fixed; inset: 0; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); background-size: 100% 2px, 3px 100%; pointer-events: none; z-index: 999; }
      `;
    } else {
      // Clean
      css += `
        body { background: #fff; color: #111; }
        .card { background: #f8f9fa; border-radius: 12px; padding: 24px; border: 1px solid #e9ecef; }
        h1 { color: #111; letter-spacing: -1px; font-weight: 800; }
        .btn { border-radius: 8px; }
        .nav-inner { border-bottom: 1px solid #eee; padding: 20px 0; display:flex; justify-content:space-between; }
        :root { --text: #111; --text-muted: #666; }
      `;
    }

    if (d.noise) {
      css += `body::after { content: ""; position: fixed; inset: 0; background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)" opacity="0.05"/%3E%3C/svg%3E'); pointer-events: none; z-index: 9999; }`;
    }

    return css;
  }

  function generateHTML(d) {
    const css = generateCSS(d);
    
    // Logic Helpers
    const marqueeTxt = Array(10).fill(`${d.ticker} $${d.ticker}`).join(" &nbsp; â€¢ &nbsp; ");
    const logoImg = d.logoSrc ? `<img src="${d.logoSrc}" alt="Logo" style="height:40px; width:auto;">` : `<div style="font-weight:900;">${d.ticker}</div>`;
    const heroLogo = d.logoSrc ? `<img src="${d.logoSrc}" alt="Hero" class="hero-img reveal delay-1" style="width:100%; max-width:400px; margin:0 auto;">` : '';
    
    // Bento Grid for Tokenomics
    const statsHtml = `
      <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="card reveal delay-1">
          <div style="font-size:0.9rem; color:var(--text-muted);">Supply</div>
          <div style="font-size:1.5rem; font-weight:bold; color:var(--primary);">${d.supply}</div>
        </div>
        <div class="card reveal delay-2">
          <div style="font-size:0.9rem; color:var(--text-muted);">Taxes</div>
          <div style="font-size:1.5rem; font-weight:bold; color:var(--secondary);">${d.tax}</div>
        </div>
        <div class="card reveal delay-3">
          <div style="font-size:0.9rem; color:var(--text-muted);">Liquidity</div>
          <div style="font-size:1.5rem; font-weight:bold;">${d.liq}</div>
        </div>
        <div class="card reveal delay-1">
          <div style="font-size:0.9rem; color:var(--text-muted);">Mint Auth</div>
          <div style="font-size:1.5rem; font-weight:bold;">${d.mint}</div>
        </div>
      </div>
    `;

    // Roadmap List
    const roadHtml = d.roadmap.split('\n').map((item, i) => 
      `<div class="card reveal delay-${(i%3)+1}" style="display:flex; align-items:center; gap:15px;">
         <div style="background:var(--primary); color:#fff; width:30px; height:30px; display:flex; align-items:center; justify-content:center; border-radius:50%; font-weight:bold;">${i+1}</div>
         <div>${item}</div>
       </div>`
    ).join('');

    return `
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${d.name} (${d.ticker})</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@400;600;700&family=Inter:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>${css}</style>
</head>
<body>
  ${d.theme==='retro' ? '<div class="scanlines"></div>' : ''}
  
  <nav class="container">
    <div class="nav-inner">
      <div class="logo">${logoImg}</div>
      <div class="flex">
        ${d.tg ? `<a href="${d.tg}" target="_blank">TG</a>` : ''}
        ${d.x ? `<a href="${d.x}" target="_blank">X</a>` : ''}
        ${d.buy ? `<a href="${d.buy}" target="_blank" class="btn" style="padding:8px 16px; font-size:0.9rem;">Buy Now</a>` : ''}
      </div>
    </div>
  </nav>

  <header class="container section" style="min-height:80vh; display:flex; align-items:center; justify-content:center; text-align:center;">
    <div style="width:100%;">
      ${heroLogo}
      <h1 class="reveal">${d.name}</h1>
      <p class="reveal delay-1" style="font-size:1.25rem; max-width:600px; margin:20px auto; color:var(--text-muted);">${d.tag}</p>
      
      <div class="reveal delay-2" style="display:flex; justify-content:center; gap:15px; flex-wrap:wrap; margin-top:30px;">
        ${d.buy ? `<a href="${d.buy}" class="btn">Buy ${d.ticker}</a>` : ''}
        ${d.ds ? `<a href="${d.ds}" class="btn outline">Chart</a>` : ''}
      </div>

      ${d.ca ? `
      <div class="reveal delay-3" style="margin-top:40px;">
        <div class="card" style="display:inline-flex; align-items:center; gap:10px; padding:10px 20px; cursor:pointer;" onclick="copyCA()">
          <span style="font-family:monospace; font-size:0.9rem;">${d.ca}</span>
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
        </div>
        <div id="copyMsg" style="font-size:0.8rem; color:var(--primary); height:20px; margin-top:5px; opacity:0; transition:0.3s;">Copied to clipboard!</div>
      </div>` : ''}
    </div>
  </header>

  ${d.isMarquee ? `<div class="marquee"><div class="track">${marqueeTxt} ${marqueeTxt}</div></div>` : ''}

  <section class="container section">
    <div class="grid" style="grid-template-columns: 1fr 1fr; align-items:center; gap:40px;">
      <div class="reveal">
        <h2 style="font-size:2.5rem; margin-bottom:20px;">About</h2>
        <p style="font-size:1.1rem; line-height:1.6; color:var(--text-muted);">${d.about.replace(/\n/g, '<br>')}</p>
      </div>
      <div class="card reveal delay-1" style="height:300px; display:flex; align-items:center; justify-content:center; font-size:5rem;">
         ðŸ¦–
      </div>
    </div>
  </section>

  <section class="container section">
    <h2 class="reveal" style="font-size:2.5rem; text-align:center; margin-bottom:40px;">Tokenomics</h2>
    ${statsHtml}
  </section>

  <section class="container section" style="max-width:800px;">
    <h2 class="reveal" style="font-size:2.5rem; text-align:center; margin-bottom:40px;">Roadmap</h2>
    <div class="grid">
      ${roadHtml}
    </div>
  </section>

  <footer class="section" style="text-align:center; margin-top:40px; border-top:1px solid rgba(255,255,255,0.1);">
    <h2 style="font-size:4rem; opacity:0.1; margin:0;">${d.ticker}</h2>
    <div style="margin-top:-20px; font-size:0.9rem; color:var(--text-muted);">
      Â© ${new Date().getFullYear()} ${d.name}. All rights reserved.
    </div>
  </footer>

  <script>
    function copyCA() {
      navigator.clipboard.writeText("${d.ca}");
      const msg = document.getElementById('copyMsg');
      msg.style.opacity = '1';
      setTimeout(() => msg.style.opacity = '0', 2000);
    }
    
    // Simple Scroll Reveal
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.style.animationPlayState = 'running';
          entry.target.style.opacity = '1';
        }
      });
    });
    document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));
  <\/script>
</body>
</html>
    `;
  }

  // --- STATE COLLECTION ---

  function collectData() {
    return {
      name: inputs.p_name.value,
      ticker: inputs.p_ticker.value,
      chain: inputs.p_chain.value,
      tag: inputs.p_tag.value,
      ca: inputs.p_ca.value,
      
      accent: inputs.c_accent.value,
      accent2: inputs.c_accent2.value,
      bg: inputs.c_bg.value,
      theme: inputs.style_preset.value,
      font: inputs.font_preset.value,
      noise: inputs.opt_noise.checked,
      isMarquee: inputs.opt_marquee.checked,
      
      about: inputs.s_about.value,
      supply: inputs.tok_supply.value,
      tax: inputs.tok_tax.value,
      liq: inputs.tok_liq.value,
      mint: inputs.tok_mint.value,
      roadmap: inputs.s_road.value,
      
      tg: inputs.l_tg.value,
      x: inputs.l_x.value,
      ds: inputs.l_ds.value,
      buy: inputs.l_buy.value,
      
      logoSrc: state.logoUrl,
      bannerSrc: state.bannerUrl
    };
  }

  function updatePreview() {
    const data = collectData();
    const html = generateHTML(data);
    const frame = el('previewFrame');
    const doc = frame.contentDocument || frame.contentWindow.document;
    doc.open();
    doc.write(html);
    doc.close();
  }

  // Events
  Object.values(inputs).forEach(inp => {
    inp.addEventListener('input', updatePreview);
    inp.addEventListener('change', updatePreview);
  });
  
  el('refreshBtn').addEventListener('click', updatePreview);
  
  el('exportZip').addEventListener('click', async () => {
    const data = collectData();
    const zip = new JSZip();
    const assets = zip.folder('assets');
    
    let logoPath = '', bannerPath = '';
    
    if (state.logo) {
      const ext = state.logo.name.split('.').pop();
      logoPath = `assets/logo.${ext}`;
      assets.file(`logo.${ext}`, state.logo);
      data.logoSrc = logoPath;
    }
    
    if (state.banner) {
      const ext = state.banner.name.split('.').pop();
      bannerPath = `assets/banner.${ext}`;
      assets.file(`banner.${ext}`, state.banner);
      data.bannerSrc = bannerPath;
    }
    
    const finalHtml = generateHTML(data);
    zip.file("index.html", finalHtml);
    
    const blob = await zip.generateAsync({type:"blob"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = `${data.ticker}_website.zip`;
    a.click();
  });

  // Init
  updatePreview();

})();
</script>
</body>
</html>